<!doctype html>

<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="tailwind.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
          integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    <script src="app.js" type="text/javascript"></script>
    <script src="translations.js" type="text/javascript"></script>
    <link rel="stylesheet" href="style.css">

    <script>
        function dummyData() {
            return {
                tracks: [],
                races: [],
                leaderboardEntries: [],
                stats: []
            };
        }
    </script>
</head>

<body x-data="{data: dummyData(), alias: '', rating: 0, showMenu: false, showTrackCreationHelper: false, errorMessage: '', infoMessage: '',
 activeTab: 'home', isRaceActive: false, showTrackSearch: false, allTracks: true, allRaces: true, showRaceSearch: false, trackIdRaceCreation: 0,
 trackTypeRaceCreation: 'SPRINT', selectedCompetitionType: 'NORMAL', isTrackCreationAllowed: true, isCompetitionCreationAllowed: true}"

      @message.window="
        if ($event.data.action == 'hideMenu')  {
            showMenu = false;
        }
        else if ($event.data.action == 'showMenu') {
            showMenu = true;
        }
        else if ($event.data.action == 'showTab') {
            activeTab = $event.data.tab;
        }
        else if ($event.data.action == 'loadSharedData') {
            alias = $event.data.data.alias;
            rating = $event.data.data.rating;

            isRaceActive = $event.data.data.isRaceActive;
        }
        else if ($event.data.action == 'loadRestrictionData') {
            isTrackCreationAllowed = $event.data.data.isTrackCreationAllowed;
            isCompetitionCreationAllowed = $event.data.data.isCompetitionCreationAllowed;
        }
        else if ($event.data.action == 'showTrackCreationHelper') {
            showTrackCreationHelper = true;
        }
        else if ($event.data.action == 'hideTrackCreationHelper') {
            showTrackCreationHelper = false;
        }
        else if ($event.data.action == 'showError') {
            errorMessage = $event.data.message;

            setTimeout(
            function()
            {
                errorMessage = '';
            }, 3000);
        }
        else if ($event.data.action == 'showInfo') {
            infoMessage = $event.data.message;

            setTimeout(
            function()
            {
                infoMessage = '';
            }, 3000);
        }">

<div x-show="showMenu"
     style="position: absolute; margin: 0 auto; left:2vh; right: 2vh; top: 8vh; width:63.4vw; height:68vh;"
     class="bg-slate-800">

    <div x-transition:enter="transition duration-200 transform ease-out"
         x-transition:enter-start="scale-75"
         x-transition:leave="transition duration-100 transform ease-in"
         x-transition:leave-end="opacity-0 scale-90" x-show="errorMessage != ''"
         class="bg-red-500 p-2 pl-3 pt-3 text-sm font-medium text-gray-200 w-full text-center">
        <span x-text="errorMessage"></span>
    </div>

    <div x-transition:enter="transition duration-500 transform ease-out"
         x-transition:enter-start="scale-75"
         x-transition:leave="transition duration-100 transform ease-in"
         x-transition:leave-end="opacity-0 scale-90" x-show="infoMessage != ''"
         class="bg-blue-700 p-2 pl-3 pt-3 text-sm font-medium text-gray-300 w-full text-center">
        <span x-text="infoMessage"></span>
    </div>

    <div id="mainContent" class="h-screen overflow-y-auto bg-gray-900 text-gray-200"
         style="max-height: 100%;">

        <header class="relative">
            <div class="pt-6">
                <nav class="relative max-w-8xl mx-auto flex items-center justify-between px-4 sm:px-6" aria-label="Global">
                    <div class="flex items-center flex-1">
                        <div class="flex items-center justify-between w-full md:w-auto">
                            <a @click="activeTab = 'home'" href="#">
                                <span class="sr-only">Workflow</span>
                                <img class="h-8 w-auto sm:h-10" src="https://tailwindui.com/img/logos/workflow-mark-teal-200-cyan-400.svg"
                                     alt="">
                            </a>
                            <div class="-mr-2 flex items-center md:hidden">
                                <button type="button"
                                        class="bg-gray-900 rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:bg-gray-800 focus:outline-none focus:ring-2 focus-ring-inset focus:ring-white"
                                        aria-expanded="false">
                                    <span class="sr-only">Open main menu</span>
                                    <!-- Heroicon name: outline/menu -->
                                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                         stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="hidden space-x-8 md:flex md:ml-10">
                            <a href="#" @click="activeTab = 'home'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="TRANSLATIONS.GENERAL.HEADER_HOME"></a>

                            <a href="#" @click="activeTab = 'tracks'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="TRANSLATIONS.GENERAL.HEADER_TRACKS"></a>

                            <a href="#" @click="activeTab = 'races'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="TRANSLATIONS.GENERAL.HEADER_RACES"></a>

                            <a href="#" @click="activeTab = 'leaderboard'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="TRANSLATIONS.GENERAL.HEADER_LEADERBOARD"></a>
                        </div>
                    </div>
                    <div class="hidden md:flex md:items-center md:space-x-6">
                        <a x-show="isRaceActive" href="#"
                           @click="$.post('https://rahe-racing/leaveRace', JSON.stringify({})); isRaceActive = false"
                           class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-500"
                            x-text="TRANSLATIONS.GENERAL.HEADER_LEAVE"></a>
                        <a href="#" @click="activeTab = 'profile'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                           class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600"
                            x-text="TRANSLATIONS.GENERAL.HEADER_PROFILE"></a>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Home tab -->
        <div x-show="activeTab === 'home'" x-data="{ stats: [], events: [] }"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'home')  {
                stats = $event.data.data.stats;
                events = $event.data.data.events;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="lg:grid lg:grid-cols-10">
                        <div class="col-span-6 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                            <div class="lg:py-8">
                                <a href="#"
                                   class="inline-flex items-center text-white bg-black rounded-full p-1 pr-2 sm:text-base lg:text-sm xl:text-base hover:text-gray-200">
                                    <span class="px-3 py-0.5 text-white text-xs font-semibold leading-5 uppercase tracking-wide bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full"
                                          x-text="TRANSLATIONS.HOME_TAB.COMPETITIONS"></span>
                                    <span @click="activeTab = 'races'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                                          class="ml-4 text-sm" x-text="TRANSLATIONS.HOME_TAB.COMPETITIONS_DAY"></span>
                                    <!-- Heroicon name: solid/chevron-right -->
                                    <svg class="ml-2 w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                         fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd"
                                              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                              clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <h1 class="mt-12 text-4xl tracking-tight font-extrabold text-white sm:mt-12 sm:text-6xl lg:mt-12 xl:text-6xl">
                                    <span class="block" x-text="TRANSLATIONS.HOME_TAB.WELCOME_TEXT"></span>
                                    <span class="pb-3 block bg-clip-text text-transparent bg-gradient-to-r from-teal-200 to-cyan-400 sm:pb-5"
                                          x-text="alias"></span>
                                </h1>
                                <p class="text-base text-gray-300 sm:text-xl lg:text-lg mt-4"><span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_FIRST"></span>
                                    <b><span x-text="stats.lastRace">3</span> <span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_SECOND"></span></b> <span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_THIRD"></span> <b><span x-text="stats.latestPosition">1</span>.
                                        <span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_FOURTH"></span></b><span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_FIFTH"></span> <b><span x-text="stats.totalRaces"></span> <span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_SIXTH"></span></b>
                                    <span x-text="TRANSLATIONS.HOME_TAB.SUMMARY_SEVENTH"></span> <b x-text="rating"></b>.</p>
                            </div>
                        </div>
                        <div class="col-span-4 mt-12 -mb-16 sm:-mb-48 lg:m-0 lg:relative">
                            <div class="mx-auto max-w-md sm:max-w-2xl sm:px-6 lg:max-w-none lg:px-0">
                                <!-- Illustration taken from Lucid Illustrations: https://lucid.pixsellz.io/ -->
                                <img class="w-full lg:pl-16 xl:mt-0 xl:pt-0 xl:pl-48 lg:absolute lg:inset-y-0 lg:left-0 lg:h-full lg:w-auto lg:max-w-none"
                                     src="https://tailwindui.com/img/component-images/cloud-illustration-teal-cyan.svg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gray-900 lg:pb-14 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <h1 class="mt-12 mb-7 text-4xl tracking-tight font-extrabold text-white sm:mt-12 sm:text-6xl lg:mt-12 xl:text-6xl">
                        <span class="block" x-text="TRANSLATIONS.HOME_TAB.EVENTS_HEADER"></span>
                    </h1>

                    <div x-show="events.length == 0">
                        <h2 class="text-light tracking-tight text-gray-400" x-text="TRANSLATIONS.HOME_TAB.EVENTS_NONE"></h2>
                    </div>

                    <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">

                        <template x-for="event in events">
                            <li class="col-span-1 bg-gray-800 rounded-lg">
                                <div class="pt-2">
                                    <div class="-mt-px flex divide-x divide-gray-200">
                                        <div class="-ml-px w-0 flex-1 flex">
                                            <a class="relative w-0 flex-1 inline-flex items-center justify-center pt-4 text-sm text-white font-medium border border-transparent rounded-br-lg">
                                                <span class="ml-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-200 to-cyan-400"
                                                      x-texT="event.text"></span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="-mt-px flex divide-x divide-gray-200">
                                        <div class="-ml-px w-0 flex-1 flex">
                                            <a class="relative w-0 flex-1 inline-flex items-center justify-center pb-4 text-sm text-gray-300 font-normal border border-transparent rounded-br-lg">
                                                <span class="ml-3"><span x-text="event.hours_ago"></span> <span x-text="TRANSLATIONS.HOME_TAB.EVENT_HOURS_AGO"></span></span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="w-full flex items-center justify-between p-6 py-2 space-x-6">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2">
                                            <h3 class="text-white text-sm font-medium" x-text="event.alias"></h3>
                                            <span class="px-3 py-0.3 text-white text-xs font-normal leading-5 tracking-wide bg-gray-600 rounded-full">
                                                <span x-text="TRANSLATIONS.HOME_TAB.EVENT_RATING"></span><span x-text="event.rating"></span></span>
                                        </div>
                                    </div>
                                    <img class="w-7 h-7 bg-gray-300 rounded-full flex-shrink-0"
                                         :src="event.profile_picture"
                                         alt="">
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Tracks tab -->
        <div x-show="activeTab === 'tracks'" x-data="{ tracks: [] }"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'tracks')  {
                tracks = $event.data.data.tracks;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden pb-14">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:items-center">
                        <div class="w-fullpb-6">
                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span x-text="allTracks ? TRANSLATIONS.TRACKS_TAB.ALL_TRACKS: TRANSLATIONS.TRACKS_TAB.MY_TRACKS" class="block mr-3"></span>
                                    <button @click="allTracks = !allTracks; $.post('https://rahe-racing/tracksTabSwitch', JSON.stringify({status: allTracks}))"
                                            type="button"
                                            class="block text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                                            </svg>
                                        </div>
                                    </button>
                                </h2>

                                <div class="mt-3 flex sm:mt-0 sm:ml-4">
                                    <h2 class="flex text-right text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                        <span class="block mr-3"><span x-text="TRANSLATIONS.TRACKS_TAB.FOUND_TRACKS"></span> <span x-text="tracks.length">0</span> <span x-text="TRANSLATIONS.TRACKS_TAB.FOUND_TRACKS_AMOUNT"></span></span>
                                        <div x-transition:enter="transition duration-500 transform ease-out"
                                             x-transition:enter-start="scale-75"
                                             x-transition:leave="transition duration-100 transform ease-in"
                                             x-transition:leave-end="opacity-0 scale-90" class="text-center mr-3" x-show="showTrackSearch">
                                            <input x-data="{ value: ''}" id="trackName" type="text" x-model="value"
                                                   class="shadow-sm p-2 py-1.5 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                   :placeholder="TRANSLATIONS.TRACKS_TAB.SEARCH_TRACK"
                                                   @keyup.enter="$.post('https://rahe-racing/searchTrack', JSON.stringify({text: value, allTracks: allTracks}))">
                                        </div>
                                        <button @click="showTrackSearch = !showTrackSearch"
                                                type="button"
                                                class="mr-3 text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                     viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                </svg>
                                            </div>
                                        </button>
                                        <button x-show="isTrackCreationAllowed"
                                                @click="activeTab = 'trackCreation'"
                                                type="button"
                                                class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                     viewBox="0 0 24 24"
                                                     stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
                                                </svg>
                                            </div>
                                        </button>
                                    </h2>
                                </div>
                            </div>

                            <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                                <template x-for="track in tracks">
                                    <li class="col-span-1 bg-gray-800 rounded-lg shadow hover:bg-gray-700">
                                        <div class="w-full flex items-center justify-between p-6 space-x-6 pb-4">
                                            <div class="flex-1 truncate">
                                                <div class="flex items-center space-x-3">
                                                    <h3 class="text-white text-sm font-medium truncate" x-text="track.name"></h3>
                                                    <span x-show="track.popularTag" x-text="TRANSLATIONS.TRACKS_TAB.POPULAR_TAG"
                                                          class="flex-shrink-0 inline-block px-2 py-0.5 text-green-800 text-xs font-medium bg-green-200 rounded-full">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1 inline-block" fill="none"
                                                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                                                        </svg>
                                                    </span>

                                                    <span x-show="track.legendaryTag" x-text="TRANSLATIONS.TRACKS_TAB.LEGENDARY_TAG"
                                                          class="flex-shrink-0 inline-block px-2 py-0.5 text-cyan-800 text-xs font-medium bg-cyan-200 rounded-full">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 inline-block" fill="none"
                                                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                          <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                                        </svg>
                                                    </span>

                                                    <span x-show="track.newTag" x-text="TRANSLATIONS.TRACKS_TAB.NEW_TAG"
                                                          class="flex-shrink-0 inline-block px-2 py-0.5 text-yellow-800 text-xs font-medium bg-yellow-200 rounded-full">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 inline-block mr-1" fill="none"
                                                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                          <path stroke-linecap="round" stroke-linejoin="round"
                                                                d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                                                        </svg>
                                                    </span>
                                                </div>

                                                <p class="mt-1 text-gray-300 text-sm truncate" x-text="track.description"></p>
                                            </div>
                                            <img class="w-10 h-10" src="img/track.png" alt="">
                                        </div>
                                        <div>
                                            <div href="#" class="-mt-px flex">
                                                <div class="w-0 flex-1 flex hover:bg-gray-600 rounded-bl-lg"
                                                     @click="$.post('https://rahe-racing/loadTrackInfo', JSON.stringify({trackId: track.id})); activeTab = 'trackInformation';">
                                                    <a href="#"
                                                       class="relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-300 font-medium border border-transparent rounded-bl-lg hover:text-gray-100">
                                                        <img class="h-5 w-5 rounded-full"
                                                             :src="track.profile_picture"
                                                             alt="">
                                                        <span class="ml-3" x-text="TRANSLATIONS.TRACKS_TAB.TRACK_INFORMATION"></span>
                                                    </a>
                                                </div>
                                                <div class="-ml-px w-0 flex-1 flex hover:bg-gray-600 rounded-br-lg"
                                                     @click="trackIdRaceCreation = track.id; trackTypeRaceCreation = track.type; trackIsCircuitRaceCreation = track.is_circuit; activeTab = 'raceCreation'">
                                                    <a href="#"
                                                       class="relative w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-300 font-medium border border-transparent rounded-br-lg hover:text-gray-100">
                                                        <!-- Heroicon name: solid/phone -->
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                                             stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                                                        </svg>
                                                        <span class="ml-3" x-text="TRANSLATIONS.TRACKS_TAB.NEW_RACE"></span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'trackInformation'">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full" x-data="{trackInfo: [], leaderBoardEntries: []}"
                             @message.window="
                             if ($event.data.action == 'loadTrackInfo') {
                                trackInfo = $event.data.data;
                                leaderBoardEntries = trackInfo.leaderBoard;
                             }">

                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'tracks'"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <span class="block ml-3" x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_TRACK_INFORMATION"></span>
                                </h2>
                                <div>
                                    <button @click="$.post('https://rahe-racing/setTrackLocation', JSON.stringify({trackId: trackInfo.id}))"
                                            type="button"
                                            class="text-center px-4 ml-3 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button @click="$.post('https://rahe-racing/previewTrack', JSON.stringify({trackId: trackInfo.id}))"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button x-show="trackInfo.isTrackOwner"
                                            @click="$.post('https://rahe-racing/deleteTrack', JSON.stringify({trackId: trackInfo.id})); activeTab = 'tracks'"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-500">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                            </svg>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <div class="relative overflow-hidden mt-8">
                                    <div class="hidden sm:block sm:absolute sm:inset-y-0 sm:h-full sm:w-full" aria-hidden="true">
                                        <div class="relative h-full max-w-7xl mx-auto">
                                            <svg class="absolute right-full transform -translate-y-1/4 translate-x-1/4 lg:translate-x-1/2" width="404"
                                                 height="784" fill="none" viewBox="0 0 404 784">
                                                <defs>
                                                    <pattern id="f210dbf6-a58d-4871-961e-36d5016a0f49" x="0" y="0" width="20" height="20"
                                                             patternUnits="userSpaceOnUse">
                                                        <rect x="0" y="0" width="4" height="4" class="text-gray-600" fill="currentColor"/>
                                                    </pattern>
                                                </defs>
                                                <rect width="404" height="784" fill="url(#f210dbf6-a58d-4871-961e-36d5016a0f49)"/>
                                            </svg>
                                            <svg class="absolute left-full transform -translate-y-3/4 -translate-x-1/4 md:-translate-y-1/2 lg:-translate-x-1/2"
                                                 width="404" height="784" fill="none" viewBox="0 0 404 784">
                                                <defs>
                                                    <pattern id="5d0dd344-b041-4d26-bec4-8d33ea57ec9b" x="0" y="0" width="20" height="20"
                                                             patternUnits="userSpaceOnUse">
                                                        <rect x="0" y="0" width="4" height="4" class="text-gray-600" fill="currentColor"/>
                                                    </pattern>
                                                </defs>
                                                <rect width="404" height="784" fill="url(#5d0dd344-b041-4d26-bec4-8d33ea57ec9b)"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="relative pt-6 pb-16 sm:pb-6">
                                        <main class="mx-auto max-w-7xl px-4">
                                            <div class="text-center">
                                                <span class="inline-flex items-center px-6 py-0.5 rounded-full text-sm font-medium bg-gray-800 text-gray-300">
                                                    <span x-text="trackInfo.checkpointCount" class="pr-1">0</span> <span x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_POINTS"></span>
                                                </span>
                                                <span class="inline-flex items-center px-6 py-0.5 rounded-full text-sm font-medium bg-gray-800 text-gray-300">
                                                    <span x-text="trackInfo.objectCount" class="pr-1">0</span> <span x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_OBJECTS"></span>
                                                </span>
                                                <span class="inline-flex items-center px-6 py-0.5 rounded-full text-sm font-medium bg-gray-800 text-gray-300">
                                                    <span x-show="trackInfo.type == 'CIRCUIT'" x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_CIRCUIT"></span>
                                                    <span x-show="trackInfo.type == 'SPRINT'" x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_SPRINT"></span>
                                                </span>
                                                <h1 class="text-4xl tracking-tight font-extrabold text-white sm:text-5xl md:text-6xl">
                                                    <span class="block xl:inline" x-text="trackInfo.name"></span>
                                                </h1>
                                                <p class="mt-3 max-w-md mx-auto text-base text-gray-300 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl"
                                                   x-text="trackInfo.description"></p>
                                            </div>
                                        </main>
                                    </div>
                                </div>

                                <div>
                                    <div class="mt-4 sm:pb-8 px-16">
                                        <div class="relative">
                                            <div class="absolute inset-0 h-1/2"></div>
                                            <div class="relative max-w-7xl mx-auto">
                                                <div class="min-w-full mx-auto">
                                                    <dl class="rounded-lg bg-gray-800 shadow-lg sm:grid sm:grid-cols-3">
                                                        <div class="flex flex-col px-6 py-4 text-center sm:border-0">
                                                            <dt class="order-2 mt-2 text-sm leading-6 font-medium text-gray-300"
                                                                x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_TIMES_DRIVEN"></dt>
                                                            <dd x-text="trackInfo.raceCount" class="order-1 text-3xl font-extrabold text-white">0
                                                            </dd>
                                                        </div>
                                                        <div class="flex flex-col px-6 py-4 text-center">
                                                            <dt class="order-2 mt-2 text-sm leading-6 font-medium text-gray-300"
                                                                x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_FINISH_PERCENTAGE"></dt>
                                                            <dd class="order-1 text-3xl font-extrabold text-white"><span
                                                                    x-text="trackInfo.finishPercentage">0</span>%
                                                            </dd>
                                                        </div>
                                                        <div class="flex flex-col border-gray-600 px-6 py-4 text-center">
                                                            <dt class="order-2 mt-2 text-sm leading-6 font-medium text-gray-300"
                                                                x-text="TRANSLATIONS.TRACKS_TAB.DETAILS_PEOPLE_FINISHED"></dt>
                                                            <dd class="order-1 text-3xl font-extrabold text-white"><span
                                                                    x-text="trackInfo.participants">0</span></dd>
                                                        </div>
                                                    </dl>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="px-4 sm:px-6 lg:px-8 pb-12">
                                    <div class="flex flex-col">
                                        <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                            <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-16">
                                                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                    <table class="min-w-full">
                                                        <tbody class="bg-gray-800 text-center">

                                                        <template x-for="entry in leaderBoardEntries">
                                                            <tr>
                                                                <td class="whitespace-nowrap py-2 pl-4 pr-3 text-sm text-gray-300 sm:pl-6">
                                                                    <img class="h-10 w-10 rounded-full"
                                                                         :src="entry.profile_picture"
                                                                         alt="">
                                                                </td>
                                                                <td x-text="entry.alias"
                                                                    class="whitespace-nowrap py-2 pl-4 pr-3 text-sm text-gray-300 sm:pl-6">
                                                                </td>
                                                                <td x-text="entry.best_time_string"
                                                                    class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                                </td>
                                                                <td x-text="entry.vehicle_model_name"
                                                                    class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                                </td>
                                                                <td x-text="entry.vehicle_class"
                                                                    class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                                </td>
                                                                <td x-text="entry.finished_at"
                                                                    class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                                </td>
                                                            </tr>
                                                        </template>

                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'trackCreation'">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full"
                             x-data="{trackPointAmount: 0, trackObjectAmount: 0, trackName: '', trackDescription: '', isRecordingTrack: false, selectedTrackType: ''}"
                             @message.window="
                             if ($event.data.action == 'updateTrackCreationInfo') {
                                trackPointAmount = $event.data.trackPointAmount;
                                trackObjectAmount = $event.data.trackObjectAmount;
                             }">
                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'tracks'; isRecordingTrack = false; $.post('https://rahe-racing/pauseTrackRecording');"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>
                                    <span class="block ml-3" x-text="TRANSLATIONS.TRACKS_TAB.NEW_PAGE_HEADER"></span>
                                </h2>
                            </div>

                            <div>
                                <div class="relative pt-8">
                                    <div class="absolute inset-0">
                                        <div class="absolute inset-y-0 left-0 w-1/2"></div>
                                    </div>
                                    <div class="relative lg:grid lg:grid-cols-5">
                                        <div class="px-4 sm:px-6 lg:col-span-2 lg:px-8 xl:pr-12">
                                            <div class="max-w-lg mx-auto">
                                                <h2 class="text-2xl font-extrabold tracking-tight text-whitesm:text-3xl" x-text="TRANSLATIONS.TRACKS_TAB.NEW_INFO_HEADER"></h2>
                                                <p class="mt-3 text-lg leading-6 text-gray-300" x-text="TRANSLATIONS.TRACKS_TAB.NEW_INFO_DESCRIPTION"></p>
                                            </div>
                                        </div>
                                        <div class="px-4 sm:px-6 lg:col-span-3 xl:pl-12 lg:pr-12">
                                            <div class="max-w-lg mx-auto lg:max-w-none">
                                                <form action="#" method="POST" class="grid grid-cols-2 gap-y-4 gap-x-4">
                                                    <div>
                                                        <input x-model="trackName" type="text" name="track-name"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               :placeholder="TRANSLATIONS.TRACKS_TAB.NEW_INFO_NAME_INPUT">
                                                    </div>
                                                    <div>
                                                        <input x-model="trackDescription" id="email" name="track-description"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               :placeholder="TRANSLATIONS.TRACKS_TAB.NEW_INFO_DESCRIPTION_INPUT">
                                                    </div>

                                                    <div class="col-span-2">
                                                            <span class="relative z-0 inline-flex shadow-sm rounded-md w-full">
                                                              <button type="button" @click="selectedTrackType = 'SPRINT'" x-text="TRANSLATIONS.TRACKS_TAB.NEW_INFO_TRACK_TYPE_SPRINT"
                                                                      :class="{ 'bg-gray-500': selectedTrackType === 'SPRINT', 'bg-gray-700': selectedTrackType !== 'SPRINT'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-l-md border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                              </button>
                                                              <button type="button" @click="selectedTrackType = 'CIRCUIT'" x-text="TRANSLATIONS.TRACKS_TAB.NEW_INFO_TRACK_TYPE_CIRCUIT"
                                                                      :class="{ 'bg-gray-500': selectedTrackType === 'CIRCUIT', 'bg-gray-700': selectedTrackType !== 'CIRCUIT'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-r-md border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                              </button>
                                                            </span>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="relative pt-16">
                                    <div class="absolute inset-0">
                                        <div class="absolute inset-y-0 left-0 w-1/2"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="px-4 pb-8 sm:px-6 lg:px-8 lg:pt-0 xl:pr-12">
                                            <div>
                                                <div class="pb-5 mt-4 sm:flex sm:items-center sm:justify-between">
                                                    <h2 class="text-2xl font-extrabold tracking-tight text-whitesm:text-3xl"
                                                        x-text="TRANSLATIONS.TRACKS_TAB.NEW_OBJECT_HEADER"></h2>
                                                    <div class="flex sm:mt-0 sm:ml-4">
                                                        <h2 class="flex text-right text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                                            <button @click="$.post('https://rahe-racing/deleteCreatedTrack', JSON.stringify({}));"
                                                                    type="button"
                                                                    class="text-center px-4 py-1 mr-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-500">
                                                                <div>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none"
                                                                         viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                                                    </svg>
                                                                    <span class="ml-1"><span x-text="TRANSLATIONS.TRACKS_TAB.NEW_OBJECT_DELETE_1"></span>(<span x-text="trackPointAmount">0</span>) <span x-text="TRANSLATIONS.TRACKS_TAB.NEW_OBJECT_DELETE_2"></span> (<span
                                                                            x-text="trackObjectAmount">0</span>)</span>
                                                                </div>
                                                            </button>

                                                            <button @click="isRecordingTrack = !isRecordingTrack; $.post('https://rahe-racing/toggleTrackRecording', JSON.stringify({status: isRecordingTrack}));"
                                                                    type="button"
                                                                    :class="{ 'bg-green-600 hover:bg-green-500': !isRecordingTrack, 'bg-red-600 hover:bg-red-500': isRecordingTrack}"
                                                                    class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white">
                                                                <div>
                                                                    <svg x-show="!isRecordingTrack" xmlns="http://www.w3.org/2000/svg"
                                                                         class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24"
                                                                         stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                                    </svg>
                                                                    <svg x-show="isRecordingTrack" xmlns="http://www.w3.org/2000/svg"
                                                                         class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24"
                                                                         stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                                    </svg>
                                                                    <span x-text="isRecordingTrack ? TRANSLATIONS.TRACKS_TAB.NEW_OBJECT_MODE_PAUSE: TRANSLATIONS.TRACKS_TAB.NEW_OBJECT_MODE_START"
                                                                          class="ml-1"></span>
                                                                </div>
                                                            </button>
                                                        </h2>
                                                    </div>
                                                </div>
                                                <p class="text-lg leading-6 text-gray-300" x-text="TRANSLATIONS.TRACKS_TAB.NEW_OBJECT_DESCRIPTION"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="w-full lg:mt-36 lg:pt-2">
                                    <button @click="$.post('https://rahe-racing/finishTrackRecording', JSON.stringify({trackName: trackName, trackDescription: trackDescription, trackType: selectedTrackType}));"
                                            type="button"
                                            class="w-full text-center px-4 py-3 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-gray-700 hover:bg-gray-600">
                                        <div>
                                            <span class="ml-3" x-text="TRANSLATIONS.TRACKS_TAB.NEW_CREATE_BUTTON"></span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'raceCreation'">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'tracks'"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>
                                    <span class="block ml-3" x-text="TRANSLATIONS.TRACKS_TAB.RACE_TITLE"></span>
                                </h2>
                            </div>

                            <div x-data="{selectedClass: '', startTime: 15, endTime: 180, participationFee: 0, lapAmount: 1}">
                                <div class="relative pt-8">
                                    <div class="absolute inset-0">
                                        <div class="absolute inset-y-0 left-0 w-1/2"></div>
                                    </div>
                                    <div class="relative lg:grid lg:grid-cols-5">
                                        <div class="px-4 sm:px-6 lg:col-span-2 lg:px-8 xl:pr-12 pt-7">
                                            <div class="max-w-lg mx-auto text-center">
                                                <h2 class="text-2xl font-extrabold text-centracking-tight text-whitesm:text-3xl" x-text="TRANSLATIONS.TRACKS_TAB.RACE_HEADER"></h2>
                                                <p class="mt-3 text-lg leading-6 text-gray-300" x-text="TRANSLATIONS.TRACKS_TAB.RACE_DESCRIPTION"></p>
                                            </div>
                                        </div>
                                        <div class="px-4 sm:px-6 lg:col-span-3 xl:pl-12 lg:pr-12">
                                            <div class="max-w-lg mx-auto lg:max-w-none">
                                                <form action="#" method="POST" class="grid grid-cols-6 gap-y-4 gap-x-4">
                                                    <div :class="{'col-span-3': !isCompetitionCreationAllowed, 'col-span-2': isCompetitionCreationAllowed}">
                                                        <label class="text-xs" x-text="TRANSLATIONS.TRACKS_TAB.RACE_START_TIME"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-700 rounded-md"
                                                               placeholder=""
                                                               x-model="startTime">
                                                    </div>
                                                    <div :class="{'col-span-3': !isCompetitionCreationAllowed, 'col-span-2': isCompetitionCreationAllowed}">
                                                        <label class="text-xs" x-text="TRANSLATIONS.TRACKS_TAB.RACE_DNF_TIME"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               placeholder=""
                                                               x-model="endTime">
                                                    </div>

                                                    <div x-show="isCompetitionCreationAllowed" class="col-span-2">
                                                            <label class="text-xs" x-text="TRANSLATIONS.TRACKS_TAB.NEW_RACE_TYPE"></label>
                                                            <span class="relative z-0 inline-flex shadow-sm rounded-md w-full">
                                                              <button type="button" @click="selectedCompetitionType = 'NORMAL'" x-text="TRANSLATIONS.TRACKS_TAB.NEW_RACE_TYPE_NORMAL"
                                                                      :class="{ 'bg-gray-500': selectedCompetitionType === 'NORMAL', 'bg-gray-700': selectedCompetitionType !== 'NORMAL'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-l-md border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                              </button>
                                                              <button type="button" @click="selectedCompetitionType= 'COMPETITION'" x-text="TRANSLATIONS.TRACKS_TAB.NEW_RACE_TYPE_COMPETITION"
                                                                      :class="{ 'bg-gray-500': selectedCompetitionType === 'COMPETITION', 'bg-gray-700': selectedCompetitionType !== 'COMPETITION'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-r-md border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                              </button>
                                                            </span>
                                                    </div>

                                                    <div class="col-span-1">
                                                        <label class="text-xs" x-text="TRANSLATIONS.TRACKS_TAB.RACE_FEE"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               placeholder=""
                                                               x-model="participationFee">
                                                    </div>

                                                    <div x-show="trackTypeRaceCreation === 'CIRCUIT'" class="col-span-1">
                                                        <label class="text-xs" x-text="TRANSLATIONS.TRACKS_TAB.LAPS"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               placeholder=""
                                                               x-model="lapAmount">
                                                    </div>

                                                    <div :class="{ 'col-span-4': trackTypeRaceCreation === 'CIRCUIT', 'col-span-5': trackTypeRaceCreation === 'SPRINT'}">
                                                        <label class="text-xs" x-text="TRANSLATIONS.TRACKS_TAB.RACE_CLASS"></label>
                                                        <span class="relative z-0 inline-flex shadow-sm rounded-md w-full">
                                                              <button type="button" @click="selectedClass = ''"
                                                                      :class="{ 'bg-gray-500': selectedClass === '', 'bg-gray-700': selectedClass !== ''}" x-text="TRANSLATIONS.TRACKS_TAB.RACE_CLASS_NONE"
                                                                      class="w-full relative items-center px-4 py-2 rounded-l-md border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                                  Puudub
                                                              </button>
                                                              <button type="button" @click="selectedClass = 'S'"
                                                                      :class="{ 'bg-gray-500': selectedClass === 'S', 'bg-gray-700': selectedClass !== 'S'}"
                                                                      class="w-full relative items-center px-4 py-2 border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                                  S
                                                              </button>
                                                              <button type="button" @click="selectedClass = 'A'"
                                                                      :class="{ 'bg-gray-500': selectedClass === 'A', 'bg-gray-700': selectedClass !== 'A'}"
                                                                      class="w-full relative items-center px-4 py-2 border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                                  A
                                                              </button>

                                                              <button type="button" @click="selectedClass = 'B'"
                                                                      :class="{ 'bg-gray-500': selectedClass === 'B', 'bg-gray-700': selectedClass !== 'B'}"
                                                                      class="w-full relative items-center px-4 py-2 border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                                  B
                                                              </button>

                                                              <button type="button" @click="selectedClass = 'C'"
                                                                      :class="{ 'bg-gray-500': selectedClass === 'C', 'bg-gray-700': selectedClass !== 'C'}"
                                                                      class="w-full relative items-center px-4 py-2 border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                                  C
                                                              </button>

                                                              <button type="button" @click="selectedClass = 'D'"
                                                                      :class="{ 'bg-gray-500': selectedClass === 'D', 'bg-gray-700': selectedClass !== 'D'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-r-md border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                                  D
                                                              </button>
                                                            </span>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="w-full lg:mt-72 lg:pt-2">
                                    <button @click="$.post('https://rahe-racing/createRace', JSON.stringify({trackId: trackIdRaceCreation, trackType: trackTypeRaceCreation, raceType: selectedCompetitionType, lapAmount: lapAmount, selectedClass: selectedClass, startTime: startTime, endTime: endTime, participationFee: participationFee}));"
                                            type="button"
                                            class="w-full text-center px-4 py-3 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-gray-700 hover:bg-gray-600">
                                        <div>
                                            <span class="ml-3" x-text="TRANSLATIONS.TRACKS_TAB.RACE_CREATE_BUTTON"></span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Races tab -->
        <div x-show="activeTab === 'races'" x-data="{ races: [], competitions: [] }"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'races')  {
                races = $event.data.data.races;
                competitions = $event.data.data.competitions;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span class="block mr-3" x-text="TRANSLATIONS.RACES_TAB.HEADER_COMPETITIONS"></span>
                                </h2>
                            </div>

                            <div x-show="!competitions || competitions.length == 0">
                                <h2 class="text-light tracking-tight text-gray-400" x-text="TRANSLATIONS.RACES_TAB.COMPETITIONS_NONE"></h2>
                            </div>

                            <div x-show="competitions && competitions.length > 0" class="">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 pb-8 align-middle md:px-6 lg:px-8">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full">
                                                    <thead class="bg-gray-800 text-center">
                                                    <tr>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.COMP_TABLE_INFORMATION"
                                                            class="py-3.5 pl-4 pr-3 text-sm text-left font-medium text-white tracking-wider sm:pl-6">
                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.COMP_TABLE_START"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.COMP_TABLE_PRIZEPOOL"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.COMP_TABLE_CLASS"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.COMP_TABLE_ORGANIZER"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800 divide-y divide-gray-700">

                                                    <template x-for="competition in competitions">
                                                        <tr class="hover:bg-gray-700">
                                                            <td class="whitespace-nowrap py-2 pl-4 pr-3 text-sm sm:pl-6">
                                                                <div class="flex items-center">
                                                                    <div class="h-8 w-8 flex-shrink-0">
                                                                        <img class="h-8 w-8"
                                                                             src="img/track.png"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4">
                                                                        <div class="flex items-center space-x-3">
                                                                            <h3 class="text-sm font-medium truncate" x-text="competition.name">
                                                                                Harmony Circuit</h3>
                                                                        </div>
                                                                        <div class="text-sm" x-text="competition.description">Kiire rada, mis
                                                                            algab ja lõppeb Harmonys.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 py-1 text-xs">
                                                                    <span class="bg-gray-700 rounded-full px-4 py-1" x-text="competition.start_time_string"></span>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center">
                                                                <span class="rounded-full bg-green-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"
                                                                      x-text="competition.prize_money.toLocaleString('en-US', {
                                                                          style: 'currency',
                                                                          currency: 'USD',
                                                                        });">
                                                                </span>
                                                            </td>
                                                            <td class="whitespace-nowrap px-12 py-2 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 py-1 text-sm">
                                                                    <span x-text="competition.vehicle_class"></span>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 py-1 text-sm">
                                                                    <span x-text="competition.alias"></span>
                                                                </div>
                                                            </td>

                                                            <td>
                                                            <button @click="$.post('https://rahe-racing/setTrackLocation', JSON.stringify({trackId: competition.track_id}))"
                                                                    type="button"
                                                                    class="text-center px-4 ml-3 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700 hover:bg-gray-500">
                                                                <div>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                                         stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                                                                    </svg>
                                                                </div>
                                                            </button>
                                                            </td>
                                                        </tr>
                                                    </template>

                                                    <!-- More people... -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span x-text="allRaces ? TRANSLATIONS.RACES_TAB.HEADER_RACES: TRANSLATIONS.RACES_TAB.HEADER_MY_RACES" class="block mr-3"></span>
                                    <button @click="allRaces = !allRaces; $.post('https://rahe-racing/racesTabSwitch', JSON.stringify({status: allRaces}))"
                                            type="button"
                                            class="block text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                                            </svg>
                                        </div>
                                    </button>
                                </h2>
                                <div class="mt-3 flex sm:mt-0 sm:ml-4">
                                    <h2 class="flex text-right text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                        <span class="block mr-3"><span x-text="TRANSLATIONS.TRACKS_TAB.FOUND_RACES"></span> <span x-text="races.length">0</span> <span x-text="TRANSLATIONS.TRACKS_TAB.FOUND_RACES_AMOUNT"></span></span>
                                        <div x-transition:enter="transition duration-500 transform ease-out"
                                             x-transition:enter-start="scale-75"
                                             x-transition:leave="transition duration-100 transform ease-in"
                                             x-transition:leave-end="opacity-0 scale-90" class="text-center mr-3" x-show="showRaceSearch">
                                            <input id="raceTrackName" type="text" x-data="{ value: ''}" x-model="value"
                                                   class="shadow-sm p-2 py-1.5 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                   :placeholder="TRANSLATIONS.TRACKS_TAB.SEARCH_RACE"
                                                   @keyup.enter="$.post('https://rahe-racing/searchRace', JSON.stringify({text: value, allRaces: allRaces}))">
                                        </div>
                                        <button @click="showRaceSearch = !showRaceSearch"
                                                type="button"
                                                class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                     viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                </svg>
                                            </div>
                                        </button>
                                    </h2>
                                </div>
                            </div>

                            <div class="">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 pb-8 align-middle md:px-6 lg:px-8">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full">
                                                    <thead class="bg-gray-800 text-center">
                                                    <tr>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.RACE_TABLE_INFORMATION"
                                                            class="py-3.5 pl-4 pr-3 text-sm text-left font-medium text-white tracking-wider sm:pl-6">

                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.RACE_TABLE_TOP"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.RACE_TABLE_ORGANIZER"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="TRANSLATIONS.RACES_TAB.RACE_TABLE_PARTICIPATION"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col"
                                                            class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800 divide-y divide-gray-700">

                                                    <template x-for="race in races">
                                                        <tr class="hover:bg-gray-700">
                                                            <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6">
                                                                <div class="flex items-center">
                                                                    <div class="h-10 w-10 flex-shrink-0">
                                                                        <img class="h-10 w-10"
                                                                             src="img/track.png"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4">
                                                                        <div class="flex items-center space-x-3">
                                                                            <h3 :class="{ 'text-red-300': race.isDeleted, 'text-white': !race.isDeleted}"
                                                                                class="text-sm font-medium truncate" x-text="race.name">
                                                                                Harmony Circuit</h3>
                                                                            <span x-show="race.is_competition">
                                                                                <span x-show="race.prize_money != 0"
                                                                                      x-text="'+' + race.prize_money.toLocaleString('en-US', {
                                                                                      style: 'currency',
                                                                                      currency: 'USD',
                                                                                    });"
                                                                                  class="rounded-full bg-green-200 px-3 py-0.5 text-xs font-semibold leading-5 text-gray-700">

                                                                                </span>
                                                                                <span x-show="race.rating_gain != '-'">
                                                                                    <span x-show="race.rating_gain < 0"
                                                                                          x-text="race.rating_gain"
                                                                                          class="rounded-full bg-red-200 px-3 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                    </span>

                                                                                    <span x-show="race.rating_gain == 0"
                                                                                          x-text="race.rating_gain"
                                                                                          class="rounded-full bg-yellow-200 px-3 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                    </span>

                                                                                    <span x-show="race.rating_gain > 0"
                                                                                          x-text="'+' + race.rating_gain"
                                                                                          class="rounded-full bg-green-200 px-2 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                    </span>
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                        <div :class="{ 'text-red-300': race.isDeleted, 'text-gray-300': !race.isDeleted}"
                                                                             class="text-sm" x-text="race.description">Kiire rada, mis
                                                                            algab ja lõppeb Harmonys.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 bg-gray-700 rounded-full py-1 text-xs">
                                                                    <span x-show="race.leaderBoard[0]" x-text="race.leaderBoard[0]"></span>
                                                                    <span x-show="race.leaderBoard[1]"> / <span
                                                                            x-text="race.leaderBoard[1]"></span></span>
                                                                    <span x-show="race.leaderBoard[2]"> / <span
                                                                            x-text="race.leaderBoard[2]"></span></span>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="race.started_by_alias">Edward</div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300"><span x-text="race.players_started">17</span> <span x-text="TRANSLATIONS.RACES_TAB.RACE_TABLE_DRIVERS"></span>
                                                                    (<span x-text="race.finishPercentage">47</span>% <span x-text="TRANSLATIONS.RACES_TAB.RACE_TABLE_FINISHED"></span>)
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
                                                                <span x-show="race.timeData.timeType == 1" x-text="race.timeData.timeString"
                                                                      class="inline-flex rounded-full bg-green-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"></span>
                                                                <span x-show="race.timeData.timeType == 2" x-text="race.timeData.timeString"
                                                                      class="inline-flex rounded-full bg-yellow-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"></span>
                                                                <span x-show="race.timeData.timeType == 3" x-text="race.timeData.timeString"
                                                                      class="inline-flex rounded-full bg-red-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"></span>
                                                            </td>
                                                        </tr>
                                                    </template>

                                                    <!-- More people... -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard tab -->
        <div x-show="activeTab === 'leaderboard'" x-data="{ leaderboardEntries: [] }"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'leaderboard')  {
                leaderboardEntries = $event.data.data.leaderboardEntries;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span x-text="TRANSLATIONS.LEADER_TAB.HEADER_LEADERBOARD"></span>
                                </h2>

                                <span class="inline-flex items-center px-12 py-1.5 text-md font-bold leading-4 rounded-lg text-white uppercase tracking-wide bg-gray-700">
                                    <span x-text="rating + TRANSLATIONS.LEADER_TAB.HEADER_RATING"></span>
                                </span>
                            </div>

                            <div class="">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full mb-6">
                                                    <thead class="bg-gray-800 text-center">
                                                    <tr>
                                                        <th
                                                            scope="col" class="py-3.5 pl-4 pr-3 text-sm text-left font-semibold text-white sm:pl-6">
                                                        </th>

                                                        <th x-text="TRANSLATIONS.LEADER_TAB.TABLE_DRIVER"
                                                            scope="col" class="pr-3 py-3.5 text-sm text-left font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="TRANSLATIONS.LEADER_TAB.TABLE_RATING"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="TRANSLATIONS.LEADER_TAB.NORMAL_RACES"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="TRANSLATIONS.LEADER_TAB.COMP_RACES"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="TRANSLATIONS.LEADER_TAB.AVG_POS"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800">

                                                    <template x-for="(entry, index) in leaderboardEntries">
                                                        <tr>
                                                            <td class="whitespace-nowrap py-3 pl-4 pr-3 text-sm text-center font-bold">
                                                                <div class="text-gray-300" x-text="index + 1">
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap py-3 pr-3 text-sm">
                                                                <div class="flex items-center">
                                                                    <div class="h-10 w-10 flex-shrink-0">
                                                                        <img class="h-10 w-10 rounded-full"
                                                                             :src="entry.profile_picture"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4">
                                                                        <div class="flex items-center space-x-3">
                                                                            <h3 class="text-white text-sm font-medium truncate" x-text="entry.alias">
                                                                                Edward</h3>
                                                                        </div>
                                                                        <div class="text-gray-300 text-sm" x-text="entry.ratingLevelLabel"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-3 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="entry.rating"> 1722
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-3 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="entry.normalRaces">143</div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-3 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="entry.competitionRaces">47</div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-2 py-3 text-sm text-gray-500 text-center">
                                                                <span :class="{'bg-green-200': entry.avgPosition <= 4, 'bg-yellow-200': entry.avgPosition > 4 && entry.avgPosition <= 8, 'bg-red-200': entry.avgPosition > 8}" class="inline-flex rounded-full px-6 py-1 text-sm font-semibold leading-5 text-gray-700"
                                                                      x-text="entry.avgPosition">1.3</span>
                                                            </td>
                                                        </tr>
                                                    </template>

                                                    <!-- More people... -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile tab -->
        <div x-show="activeTab === 'profile'" x-data="{name: '', showNameChange: false, showPictureChange: false, picture: '', date: ''}"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'profile')  {
                name = $event.data.data.name;
                picture = $event.data.data.picture;
                date = $event.data.data.date;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="bg-gray-800 shadow rounded-lg">
                                <div class="px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8">
                                    <div class="py-6 md:flex md:items-center md:justify-between">
                                        <div class="flex-1 min-w-0">
                                            <!-- Profile -->
                                            <div class="flex items-center">
                                                <img class="hidden h-16 w-16 rounded-full sm:block" :src="picture" alt="">
                                                <div>
                                                    <div class="flex items-center">
                                                        <h1 class="ml-3 text-2xl font-bold leading-7 text-white sm:leading-9 sm:truncate"><span x-text="TRANSLATIONS.PROFILE_TAB.HEADER_DRIVER"></span> <span
                                                                x-text="name">Edward</span> <span x-text="TRANSLATIONS.PROFILE_TAB.HEADER_DATA"></span></h1>
                                                    </div>
                                                    <dl class="mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap">
                                                        <dd class="mt-3 flex items-center text-sm text-gray-300 font-normal sm:mr-6 sm:mt-0">
                                                            <!-- Heroicon name: solid/check-circle -->
                                                            <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 mr-1.5 h-5 w-5" fill="none"
                                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                            </svg>
                                                            <span x-text="TRANSLATIONS.PROFILE_TAB.MEMBER_SINCE"></span> <span class="ml-1" x-text="date"></span>
                                                        </dd>
                                                    </dl>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-6 flex space-x-3">
                                            <div x-show.transition="showNameChange" x-transition:enter="transition duration-500 transform ease-out"
                                                 x-transition:enter-start="scale-75" x-transition:leave="transition duration-100 transform ease-in"
                                                 x-transition:leave-end="opacity-0 scale-90" class="inline-flex text-center">
                                                <input type="text" x-model="name"
                                                       class=" py-2 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                       placeholder="New name.."
                                                       @keyup.enter="$.post('https://rahe-racing/searchTrack', JSON.stringify({text: value, allTracks: allTracks}))">
                                                <button @click="$.post('https://rahe-racing/changeName', JSON.stringify({name: name}))" type="button"
                                                        class="items-center ml-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                                         stroke="currentColor" stroke-width="2">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                              d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
                                                    </svg>
                                                </button>
                                            </div>

                                            <div x-show="showPictureChange" x-transition:enter="transition duration-500 transform ease-out"
                                                 x-transition:enter-start="scale-75" x-transition:leave="transition duration-100 transform ease-in"
                                                 x-transition:leave-end="opacity-0 scale-90" class="inline-flex text-center">
                                                <input type="text" x-model="picture"
                                                       class=" py-2 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                       placeholder="Picture address.."
                                                       @keyup.enter="$.post('https://rahe-racing/searchTrack', JSON.stringify({text: value, allTracks: allTracks}))">
                                                <button @click="$.post('https://rahe-racing/changePicture', JSON.stringify({picture: picture}))"
                                                        type="button"
                                                        class="items-center ml-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                                         stroke="currentColor" stroke-width="2">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                              d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
                                                    </svg>
                                                </button>
                                            </div>

                                            <button @click="showPictureChange = false; setTimeout(function() {showNameChange = !showNameChange}, 100);"
                                                    type="button" x-text="TRANSLATIONS.PROFILE_TAB.BUTTON_NAME"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                            </button>

                                            <button @click="showNameChange = false; setTimeout(function() {showPictureChange = !showPictureChange}, 100);"
                                                    type="button" x-text="TRANSLATIONS.PROFILE_TAB.PICTURE_NAME"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gray-900">
                                <div class="max-w-7xl mx-auto py-16 px-4 sm:py-12 sm:px-6 lg:px-8 sm:pt-24">
                                    <div class="lg:max-w-xl lg:mx-auto lg:text-center">
                                        <h2 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_TITLE"></h2>
                                        <p class="mt-4 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_DESC"></p>
                                    </div>
                                    <div class="mt-20">
                                        <dl class="space-y-10 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-x-12 lg:gap-y-8">
                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_1_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_1_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_2_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_2_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_3_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_3_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_4_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_4_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_5_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_5_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_6_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_6_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_7_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_7_A"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_8_Q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="TRANSLATIONS.PROFILE_TAB.FAQ_8_A"></dd>
                                            </div>

                                            <!-- More questions... -->
                                        </dl>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<img x-show="showMenu" src="img/background-frame.png" alt="tablet" class="tablet-frame"
     style="pointer-events: none; position: absolute; margin: 0 auto; left:0; right: 0; top: 2.5vh; width:70vw;height:79vh;"/>

<div id="recordingDiv" x-show="showTrackCreationHelper">
    <div class="flex flex-col">
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                <div class="shadow overflow-hidden">
                    <div class="px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-100">
                        <div class="grid grid-cols-2 leading-tight">
                            <div x-text="TRANSLATIONS.TRACK_CREATION.TITLE"></div>
                            <div class="text-right font-light">
                                <div><i class="fa fa-circle text-red-500 Blink"></i></div>
                            </div>
                        </div>
                        <div class="mt-5">
                            <div class="flex flex-row">
                                <div class="flex-none" x-text="TRANSLATIONS.TRACK_CREATION.POINT_PLACEMENT">
                                    Punkti paigutamine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">E</span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="TRANSLATIONS.TRACK_CREATION.OBJECT_PLACEMENT">
                                    Objekti paigutamine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">Shift + E</span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="TRANSLATIONS.TRACK_CREATION.OBJECT_DISTANCE">
                                    Objekti kaugus
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-bold bg-gray-100 text-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7l4-4m0 0l4 4m-4-4v18"/>

                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="TRANSLATIONS.TRACK_CREATION.OBJECT_ROTATION">
                                    Objekti pööramine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-bold bg-gray-100 text-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="TRANSLATIONS.TRACK_CREATION.OBJECT_CHANGE">
                                    Objekti muutmine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">L ALT</span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="TRANSLATIONS.TRACK_CREATION.OBJECT_DELETION">
                                    Kustutamine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">L CTRL</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div x-data="{showLeaderboard: false, trackType: 'SPRINT', totalTime: '00:00.00', currentTime: '00:00.00', bestTime: '--:--:--', checkpoints: '0', laps: '0', position: '0', participants: '0', lbFirst: '', lbSecond: '', lbThird: ''}"
     id="scoreboard" x-show="showLeaderboard"
     @message.window="
        if ($event.data.action == 'showLeaderboard') {
            showLeaderboard = true;
            trackType = $event.data.trackType;
        }
        else if ($event.data.action == 'hideLeaderboard') {
            setTimeout(function()
            {
                showLeaderboard = false;
            }, 5000);
        }
        else if ($event.data.action == 'updateHudGeneral') {
            checkpoints = $event.data.checkpoints;
            laps = $event.data.laps;
        }
        else if ($event.data.action == 'updateHudTime') {
            totalTime = $event.data.totalTime;
            currentTime = $event.data.currentTime;
        }
        else if ($event.data.action == 'updateHudBestLap') {
            bestTime = $event.data.time;
        }
        else if ($event.data.action == 'updateLeaderboard') {
            if ($event.data.first != '') {
                lbFirst = event.data.first.racing_alias;
            }
            else if ($event.data.leaderboard.length >= 1) {
                lbFirst = $event.data.leaderboard[0].alias;
            }

            if($event.data.second != '') {
                lbSecond = $event.data.second.racing_alias;
            }
            else if ($event.data.leaderboard.length  >= 2) {
                lbSecond = $event.data.leaderboard[1].alias;
            }

            if($event.data.third != '') {
                lbThird = $event.data.third.racing_alias;
            }
            else if ($event.data.leaderboard.length >= 3) {
                lbThird = $event.data.leaderboard[2].alias;
            }

            position = $event.data.playerPosition;
            participants = $event.data.totalParticipants;
        }">
    <div class="flex flex-col">
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                <div class="shadow overflow-hidden">
                    <div class="px-4 py-1 mb-3 whitespace-nowrap text-lg font-medium text-gray-200">
                        <div class="grid grid-cols-2 leading-tight">
                            <div x-text="TRANSLATIONS.RACE.POSITION">Koht</div>
                            <div class="text-right font-light"><span x-text="position">0</span>/<span x-text="participants">0</span></div>
                            <div x-text="TRANSLATIONS.RACE.LAP">Ring</div>
                            <div class="text-right font-light" x-text="laps">0/0</div>
                            <div x-text="TRANSLATIONS.RACE.CP">Punkt</div>
                            <div class="text-right font-light" x-text="checkpoints">0/0</div>

                            <div x-show="trackType == 'SPRINT'" x-text="TRANSLATIONS.RACE.TIME"></div>
                            <div X-show="trackType == 'SPRINT'" class="text-right font-light" x-text="totalTime">00:00.00</div>

                            <div x-show="trackType == 'CIRCUIT'" class="text-sm mt-3" x-text="TRANSLATIONS.RACE.CURRENT_LAP"></div>
                            <div x-show="trackType == 'CIRCUIT'" class="text-right font-light text-sm mt-3" x-text="currentTime">00:00.00</div>

                            <div x-show="trackType == 'CIRCUIT'" class="text-sm" x-text="TRANSLATIONS.RACE.BEST_LAP"></div>
                            <div x-show="trackType == 'CIRCUIT'" class="text-right font-light text-sm" x-text="bestTime">00:00.00</div>

                            <div x-show="trackType == 'CIRCUIT'" class="text-sm" x-text="TRANSLATIONS.RACE.TOTAL_TIME"></div>
                            <div x-show="trackType == 'CIRCUIT'" class="text-right font-light text-sm" x-text="totalTime">00:00.00</div>
                        </div>
                    </div>
                    <table class="min-w-full">
                        <tbody>
                        <tr>
                            <td class="px-4 py-0 whitespace-nowrap leading-snug font-medium text-lg text-gray-200">
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-200  text-gray-800">1</span><span
                                    class="font-light pl-2 align-middle" x-text="lbFirst"></span>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-4 py-0 whitespace-nowrap leading-snug font-medium  text-lg text-gray-200">
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-200  text-gray-800">2</span><span
                                    class="font-light pl-2 align-middle" x-text="lbSecond"></span>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-4 py-0 whitespace-nowrap leading-snug font-medium text-lg text-gray-200">
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800">3</span><span
                                    class="font-light pl-2 align-middle" x-text="lbThird"></span>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-4 pt-4 pb-2 whitespace-nowrap font-medium text-lg text-gray-200">
                                <div class=" grid grid-cols-2">
                                    <div><i class="fas fa-user"></i><span class="font-light pl-2" x-text="alias"></span></div>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>